<!DOCTYPE html>
<html lang="da">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Article Page</title>
</head>

<body>

    <main class="container">
        <section class="data-container"></section>
    </main>




    <template class="temp">

        <article class="articleContainer">
            <img class="data-splash" alt="Splash Image" src="">
            <h2 id="data-overskrift"></h2>
            <p class="data-tekst"></p>
            <img class="data-billede" alt="Info billede" src="">
            <p class="data-kontakt"></p>
            <a class="data-website" href"">Bes√∏g vores website</a>
            <a class="data-facebook" href""><img src="fblogo.png" width="100" height="100" alt="facebook logo" /></a>
            <a class="data-instagram" href""><img src="instalogo.png" width="100" height="100" alt="instagram logo" /></a>

            <iframe class="data-video" width="420" height="315" style="border:none" src=""></iframe>
            </iframe>

        </article>
    </template>

    <script>
        let dest = document.querySelector(".data-container");

        let jsonFile;



        document.addEventListener("DOMContentLoaded", getJson);

        async function getJson() {

            let myJson = await fetch("http://fuglevik.de/2.%20semester/huset/wordpress/index.php/wp-json/wp/v2/article");

            jsonFile = await myJson.json();
            showArticle();
        }

        function showArticle() {

            let dest = document.querySelector(".data-container"),
                temp = document.querySelector(".temp");

            jsonFile.forEach(articleFunction => {

                let klon = temp.cloneNode(true).content;
                /*Tager videoens ID fra et almindeligt youtube-link*/
                videoLink = articleFunction.acf.video;
                videoId = videoLink.replace("https://www.youtube.com/watch?v=", "https://youtube.com/embed/");

                klon.querySelector(".data-splash").src = articleFunction.acf.splash;
                klon.querySelector("#data-overskrift").innerHTML = articleFunction.acf.overskrift;
                klon.querySelector(".data-billede").src = articleFunction.acf.billeder;
                klon.querySelector(".data-tekst").innerHTML = articleFunction.acf.tekst;
                klon.querySelector(".data-website").href = articleFunction.acf.website;
                klon.querySelector(".data-facebook").href = articleFunction.acf.facebook;
                klon.querySelector(".data-instagram").href = articleFunction.acf.instagram;

                klon.querySelector(".data-kontakt").innerHTML = articleFunction.acf.kontakt;
                klon.querySelector(".data-video").src = videoId;
                dest.appendChild(klon);
            })
        }
    </script>
</body>

</html>
